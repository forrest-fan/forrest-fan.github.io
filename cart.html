<!doctype html5>
<html>
	<head>
		<link rel="stylesheet" type="text/css" href="assets/css/styles.css"/>
		<link rel="stylesheet" type="text/css" href="assets/css/w3.css"/>
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"/>
		<title>Slim Wallet</title>
	</head>
	<body onload="displayInfo()">
		<!--LARGE NAVBAR-->
		<div class="w3-top w3-bar w3-card-4 navbar w3-hide-medium w3-hide-small">
			<a class="logo" href="index.html">SLIM WALLET</a>
			<div class="w3-right w3-hide-small navLinks">
				<a class="navLink" href="about.html">ABOUT</a>
				<a class="navLink" href="shop.html">WALLET</a>
				<a class="navLink" href="contact.html">CONTACT</a>
				<a class="cartLink" href="cart.html"><i class="fa fa-shopping-cart"></i></a>
			</div>
		</div>
		
		<!--COMPRESSED NAVBAR-->
		<div class="w3-top w3-bar w3-card-4 navbar w3-hide-large w3-display-container">
			<a class="hamburger" href="javascript:void(0)" onclick="openNav()"><i class="fa fa-bars"></i></a>
			<a class="logo w3-display-middle" href="index.html">SLIM WALLET</a>
		</div>
		
		<!--SIDE NAV-->
		<div id="mySidenav" class="sidenav w3-card-4">
			<a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
			<a href="index.html" class="w3-bar-item sidenavButton" onclick="closeNav()">HOME</a>
			<a href="about.html" class="w3-bar-item sidenavButton" onclick="closeNav()">ABOUT</a>
			<a href="shop.html" class="w3-bar-item sidenavButton" onclick="closeNav()">WALLET</a>
			<a href="contact.html" class="w3-bar-item sidenavButton" onclick="closeNav()">CONTACT</a>
		</div>
		
		<div class="w3-container w3-padding-64" style="margin:50px auto 0px auto; max-width: 750px">
			<table id="cartTable" class="w3-table-all text"></table>
			<div id="errorNoItems" class="w3-container w3-center"></div>
		</div>
		
		<!--LINKS-->
		<div class="w3-container w3-center w3-padding-16 linksBanner">
			<div class="w3-padding-16">
				<h2 class="subheader w3-text-white">Sign up for our newsletter</h2>
				<form action="newsletter.php" method="post" class="newsletter w3-hide-small">
					<input name="email" placeholder="firstnamelastname@example.com" class="signupEmail" required/>
					<input name="submit" value="Go" type="submit" class="signupCTA"/>
				</form>
				<form action="newsletter.php" method="post" class="newsletter w3-hide-large w3-hide-medium">
					<input name="email" placeholder="Email" class="signupEmailSmall" required/>
					<input name="submit" value="Go" type="submit" class="signupCTA"/>
				</form>
			</div>
			<hr style="color:white; margin: 15px 15% 0px 15%"/>
			<div class="w3-padding-16">
				<h2 class="subheader w3-text-white">Connect with us</h2>
				<span class="SMLinks">
					<a href="#"><i class="fa fa-facebook-f SMLink facebook"></i></a>
					<a href="#"><i class="fa fa-instagram SMLink instagram"></i></a>
					<a href="#"><i class="fa fa-twitter SMLink twitter"></i></a>
					<a href="#"><i class="fa fa-snapchat-ghost SMLink snapchat"></i></a>
				</span>
			</div>
			<div class="w3-padding-16">
				<p class="copyright">&copy SLIM WALLET 2018</p>
			</div>
		</div>
		<script>
			/* Set the width of the side navigation to 250px */
			function openNav() {
			    document.getElementById("mySidenav").style.width = "250px";
			}
									
			/* Set the width of the side navigation to 0 */
			function closeNav() {
			    document.getElementById("mySidenav").style.width = "0";
			}
			
			function displayInfo() {
				var productArr = JSON.parse(readCookie('cartProduct'));
				var colorArr = JSON.parse(readCookie('cartColor'));
				var priceArr = JSON.parse(readCookie('cartPrice'));
				var priceCount = 0;
				var table = document.getElementById('cartTable');
				if (productArr.length !== 0) {
					table.innerHTML += '<tr style="background: #f4441a; color: #ffffff"><th>Product</th><th>Color</th><th>Price</th><th></th></tr>';
					for (var i = 0; i < productArr.length; i++) {
						table.innerHTML += '<tr><td>' + productArr[i] + '</td><td>' + colorArr[i] + '</td><td>$ ' + priceArr[i] + '</td><td><i class="fa fa-trash" onclick="removeFromCart(' + i + ')"></i></td></tr>';
						priceCount += parseFloat(priceArr[i]);
					}
					priceCount = priceCount.toFixed(2);
					createCookie('totalPrice', priceCount, 7);
					table.innerHTML += '<tr style="font-weight:bold"><td></td><td></td><td>$ ' + priceCount + '</td><td></td></tr>';
				} else {
					document.getElementById('errorNoItems').innerHTML = '<p class="text">You have no items in your cart</p><a href="shop.html" class="CTAHome" style="margin-bottom:100px">View Products</a>';
				}
			}
			
			function createCookie(name,value,days) {
				if (days) {
					var date = new Date();
					date.setTime(date.getTime()+(days*24*60*60*1000));
					var expires = "; expires="+date.toGMTString();
				}
				else var expires = "";
				document.cookie = name+"="+value+expires+"; path=/";
			}
			
			function readCookie(name) {
				var nameEQ = name + "=";
				var ca = document.cookie.split(';');
				for(var i=0;i < ca.length;i++) {
					var c = ca[i];
					while (c.charAt(0)==' ') c = c.substring(1,c.length);
					if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
				}
				return null;
			}
			
			function eraseCookie(name) {
				createCookie(name,"",-1);
			}
			
			function removeFromCart(index) {
				var productArr = JSON.parse(readCookie('cartProduct'));
				productArr.splice(index, 1);
				createCookie('cartProduct', JSON.stringify(productArr), 7);
				
				var colorArr = JSON.parse(readCookie('cartColor'));
				productArr.splice(index, 1);
				createCookie('cartColor', JSON.stringify(colorArr), 7);
				
				var priceArr = JSON.parse(readCookie('cartPrice'));
				priceArr.splice(index, 1);
				createCookie('cartPrice', JSON.stringify(priceArr), 7);
				
				var priceCount = 0;
				var table = document.getElementById('cartTable');
				if (productArr.length !== 0) {
					table.innerHTML += '<tr style="background: #f4441a; color: #ffffff"><th>Product</th><th>Color</th><th>Price</th><th></th></tr>';
					for (var i = 0; i < productArr.length; i++) {
						table.innerHTML += '<tr><td>' + productArr[i] + '</td><td>' + colorArr[i] + '</td><td>$ ' + priceArr[i] + '</td><td><i class="fa fa-trash" onclick="removeFromCart(' + i + ')"></i></td></tr>';
						priceCount += parseFloat(priceArr[i]);
					}
					priceCount = priceCount.toFixed(2);
					createCookie('totalPrice', priceCount, 7);
					table.innerHTML += '<tr style="font-weight:bold"><td></td><td></td><td>$ ' + priceCount + '</td><td></td></tr>';
				} else {
					document.getElementById('errorNoItems').innerHTML = '<p class="text">You have no items in your cart</p><a href="shop.html" class="CTAHome" style="margin-bottom:100px">View Products</a>';
				}
			}
		</script>
	</body>
</html>